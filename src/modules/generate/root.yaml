project: gokums-sample
package: github.com/gokums/sample
createdAt: '0'
config:
  proto:
    paths:
      - vendor/github.com/grpc-ecosystem/grpc-gateway/third_party/googleapis
    mappings:
      google/api/annotations.proto: google.golang.org/genproto/googleapis/api/annotations
    plugins: []
    genflags:
      proto:
        required:
          - --go_out=<%=mappings%>,plugins=grpc:<%=outDir%>
        optional:
          val: --govalidators_out=<%=mappings%>:<%=outDir%>
      gateway:
        required:
          - --go_out=<%=mappings%>,plugins=grpc:<%=outDir%>
          - --grpc-gateway_out=logtostderr=true:<%=outDir%>
        optional:
          val: --govalidators_out=<%=mappings%>:<%=outDir%>
          swag: --swagger_out=<%=mappings%>:docs/swagger
metadata:
  vars:
    service:
      env: [local, dev, stg, prod]
  tasks:
    run:
      vars:
        port:
          http: <%=tools.next(3001)%>
          rpc: <%=tools.next(13001)%>
          prefix: dev
      schema:
        default:
          build: true
          cmd: ./.build/<%=service.name%>
          args:
            - -http=localhost:<%=vars.port.http%>
            - -rpc=localhost:<%=vars.port.rpc%>
          option:
            env:
              LOG_SEVERITY_LEVEL: info
    k8s:
      clones: []
    build:
      cmd: go build
      args:
       - -i
       - -o ".build/<%=service.name%>"
       - main.go
    deploy: